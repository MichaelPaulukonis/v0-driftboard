# PRD: Modal Layout Shift & UX Enhancement

## 1. Executive Summary

### Brief Overview
This project will eliminate the jarring layout shift (or "blink") in modals that display dynamic content, such as the "Done Cards" view and the `CardDetailDialog` comment section. The solution involves implementing skeleton placeholders for loading content and anchoring the modal's vertical position to create a more stable and professional user experience.

### Key Value Proposition
By creating a visually seamless and predictable transition when opening modals, we enhance the application's perceived performance and overall quality, aligning it more closely with top-tier commercial products.

## 2. Problem Statement

### What problem does this solve?
When modals containing asynchronously loaded data are opened, they first appear with a default size and then abruptly resize once the data is rendered. This occurs in two primary places:
1.  The `view-status-dialog` (e.g., "Done Cards") resizing as the list of cards loads.
2.  The `CardDetailDialog` resizing as the list of comments loads.

### Current Pain Points
- **Visual Disruption:** The "blink" is visually jarring and makes the application feel unpolished.
- **Disorienting Movement:** The modals currently expand both upwards and downwards from the center, which is more distracting than a uni-directional expansion.
- **Loss of Focus:** This sudden layout shift can cause users to momentarily lose their visual focus, creating a frustrating micro-interaction.

## 3. Product Vision & Goals

### Long-term Vision
Driftboard should provide a user experience that is as smooth, stable, and polished as leading project management applications. Every user interaction, no matter how small, should feel intentional, responsive, and free of visual glitches.

### Key Objectives
- **Eliminate Layout Shift:** Eradicate all noticeable "blinking" or resizing in data-driven modals.
- **Improve Perceived Performance:** Make the application feel faster and more responsive by showing an immediate, stable representation of the content that is being loaded.
- **Establish a Reusable Pattern:** Create a skeleton loading pattern that can be easily applied to all data-loading components in the future.

## 4. Target Users & Personas

### Primary User Segment
The primary user is the project owner, a software developer who uses Driftboard for personal project management and has a high standard for UI/UX quality.

### User Persona
- **Name:** Michael (The Developer-User)
- **Goals:** To use a fluid, fast, and visually pleasing project management tool that feels professional and robust.
- **Pain Points:** Is frustrated by minor UI imperfections like layout shifts, as they detract from the overall quality of the application and give the impression of a product that is not production-ready.

### User Journey Mapping
1.  **Trigger A:** User clicks "View Done Cards".
2.  **Trigger B:** User clicks a card to open its detail view.
3.  **Current Experience:** In both cases, a modal appears. After a brief delay, it suddenly grows in size to accommodate the loaded content (cards or comments), causing a jarring visual "blink".
4.  **Desired Future Experience:** A modal appears at a fixed position near the top of the screen. It immediately contains grayed-out "skeleton" placeholders that mimic the content layout. These placeholders are then smoothly replaced by the actual data with no change in the modal's size or position.

## 5. Functional Requirements

### Core Features (MVP)
1.  **Skeleton Loader for Status Modal:**
    -   **User Story:** As a user, when I open the "View Status" modal, I want to see skeleton placeholders for the cards so that the interface feels instantly responsive and the layout does not shift when the real cards load.
    -   **Acceptance Criteria:**
        -   When the modal is opened and data is being fetched, a list of 3-5 "skeleton card" elements is displayed.
        -   Each skeleton card must approximate the height and general shape of a real card item in the list.
2.  **Skeleton Loader for Card Comments:**
    -   **User Story:** As a user, when I open the `CardDetailDialog`, I want to see skeleton placeholders for the comments so that the dialog does not change height as the comments load.
    -   **Acceptance Criteria:**
        -   When the `CardDetailDialog` is opened and comments are loading, a list of 2-3 "skeleton comment" elements is displayed.
        -   Each skeleton comment must approximate the height and shape of a real comment.
3.  **Fixed Modal Top Position:**
    -   **User Story:** As a user, when a modal opens, I want it to have a fixed vertical position on the screen so that it only expands downwards, providing a more predictable and less jarring opening behavior.
    -   **Acceptance Criteria:**
        -   The modal (`DialogContent`) will be styled to appear near the top of the viewport, removing the default vertical centering.
        -   When content loads into the modal, its top edge must not move.

### Advanced Features (Future Releases)
- Implement an animated shimmer/pulse effect on the skeleton placeholders.
- Apply the skeleton loading pattern to the main dashboard board list.

## 6. Technical Requirements

- **Platform:** The solution will be implemented in the frontend using React, TypeScript, and Tailwind CSS.
- **Performance:** The skeleton components must be lightweight and must not negatively impact the initial render time.
- **Integration:** Changes will affect `view-status-dialog.tsx` and `card-detail-dialog.tsx`. New reusable components (`CardSkeleton.tsx`, `CommentSkeleton.tsx`) will likely be created.

## 7. Design & UX Considerations

- **Key Design Principles:**
    -   **Stability:** The UI layout must remain stable during asynchronous operations.
    -   **Feedback:** The system must provide immediate visual feedback (the skeleton state) to acknowledge the user's action.
- **User Experience Goals:**
    -   Increase user confidence in the application by presenting a polished, professional interface.
    -   Reduce all sources of visual noise and distraction.
- **Accessibility:** Skeleton loaders should use appropriate ARIA attributes (e.g., `aria-busy="true"`) to inform screen reader users that content is loading.

## 8. Timeline & Milestones

- **Phase 1: Skeleton Loading (MVP)**
    -   **Deliverable 1:** Create reusable `CardSkeleton.tsx` and `CommentSkeleton.tsx` components.
    -   **Deliverable 2:** Integrate the skeleton loaders into the loading states of `view-status-dialog.tsx` and `card-detail-dialog.tsx`.
- **Phase 2: Fixed Positioning**
    -   **Deliverable 1:** The `DialogContent` component is successfully re-styled to be anchored to the top of the viewport.
    -   **Deliverable 2:** The new positioning is tested across various screen sizes.
- **Dependencies:** This work relies on the existing `shadcn/ui` Dialog component.
- **Risks:** The primary risk is that overriding the default positioning styles of the `shadcn/ui` Dialog component might interfere with its other built-in features.

## 9. Assumptions & Constraints

- **Assumptions:**
    -   A fixed-top position for modals is a desirable UX pattern for this application.
- **Constraints:**
    -   The solution must be implemented using the existing tech stack.
    -   A multi-column layout will **not** be implemented at this time.
- **Risks and Mitigation Strategies:**
    -   **Risk:** Customizing the `shadcn/ui` Dialog component's position could be brittle and subject to breaking on future updates.
    -   **Mitigation:** Apply custom styles carefully using Tailwind CSS utility classes passed via the `className` prop. Document all customizations within the code.